<div class="view_appz">
    <div class="view_app_card m-10">
        <div class="view_app_card_top">
            <img src="https://www.timeshighereducation.com/sites/default/files/styles/article785xauto/public/pa-consulting-modern-student-istock-1152767923_0.jpg?itok=G6Ny_tin" alt="student">
            <div>
                <p class="font4 bold600 dark_color" id="appname">Undefined</p>
                <p class="font3 dark_color mb-3" id="email2">Undefined</p>
                <p class="font2 blue_color bold600" id="app_id2">Undefined</p>
            </div>
        </div>
        <div class="view_app_body pt-10">
            <p class="font4 bold600 blue_color mt-5">Application Details</p>
            <div class="sentence">
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">University</p><p id="university" >Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Program</p><p id="program">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Application ID</p><p id="app_id">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Date Applied</p><p id="app_date">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Status</p><p id="status">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Acceptance Letter</p><p id="letter">Undefined</p>
                </div>
            </div>
        </div>
        <div class="view_app_body pt-10">
            <p class="font4 bold600 blue_color mt-10">Documents</p>
            <div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">ID Photo</p><p id="id_photo" >Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Transcript</p><p id="transcript">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Diploma</p><p id="diploma">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Lang. Certificate</p><p id="certificate">Undefined</p>
                </div>
            </div>
        </div>
        <div class="view_app_body">
            <p class="font4 bold600 blue_color mt-10">Personal Details</p>
            <div class="sentence">
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">First Name</p><p id="fname" >Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Last Name</p><p id="lname">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Date of Birth</p><p id="dob">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Email</p><p id="email">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Line</p><p id="phone">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Line 2</p><p id="phone2">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Father</p><p id="father">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Mother</p><p id="mother">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Residence</p><p id="residence">Undefined</p>
                </div>
                <div class="view_app_rows font2 dark_color">
                    <p class="bold600 font3">Nationality</p><p id="nationality">Undefined</p>
                </div>
            </div>
        </div>
    </div>
</div>


<script>

    let link_id = "<?php echo $_GET['application_number']; ?>";
    let user__id = "{{ME id}}"

    $.get('{{LINK aj}}' + "/user_dashboard/get_agent_students?hash=" + $('.main_session').val(), {id:link_id, user_id:user__id, api_type: "single"}, (data => {
        if(data.status === 200){
            // render_application_details(data)
            render_applicant(data.applicant_info)
        }
    }));

    function render_application_details(data){
        // let d = new Date(+data.created_at)
        // let date = d.toDateString();
        // let error = "<p style='color:tomato;'>Missing</p>"

        console.log(data)
        // document.getElementById("app_date").innerHTML = date || error
        // document.getElementById("app_id").innerHTML = data.application_no || error
        // document.getElementById("app_id2").innerHTML = data.application_no || error
        // document.getElementById("id_photo").innerHTML = data.id_photo || error
        // document.getElementById("transcript").innerHTML = data.transcript_file || error
        // document.getElementById("diploma").innerHTML = data.diploma_file || error
        // document.getElementById("certificate").innerHTML = data.language_certificate || error
        // document.getElementById("university").innerHTML = data.university_id.toLowerCase() || error
        // document.getElementById("program").innerHTML = data.program_id.toLowerCase() || error
        // document.getElementById("status").innerHTML = data.application_status_slug.toLowerCase() || error
        // document.getElementById("letter").innerHTML = data.acceptance_letter ? `<button class="app_files" onclick="open_link('${data.acceptance_letter}')">View</button>` : error

        
    }
    function render_applicant(data){
        // let d = new Date(+data.created_at)
        // let date = d.toDateString();
        let error = "<p style='color:tomato;'>Missing</p>"

        console.log(data.email)
        document.getElementById("appname").innerHTML = data.first_name + " " +data.last_name
        document.getElementById("lname").innerHTML = data.last_name || error
        document.getElementById("fname").innerHTML = data.first_name || error
        document.getElementById("dob").innerHTML = data.date_of_birth || error
        document.getElementById("email").innerHTML = data.email || error
        document.getElementById("email2").innerHTML = data.email || error
        document.getElementById("phone").innerHTML = data.phone_number
        document.getElementById("phone2").innerHTML = data.phone_number_2
        document.getElementById("father").innerHTML = data.fathers_name || error
        document.getElementById("mother").innerHTML = data.mothers_name || error
        document.getElementById("residence").innerHTML = data.country_of_residence || error
        document.getElementById("nationality").innerHTML = data.nationality || error
        // document.getElementById("id_photo").innerHTML = data.id_photo || error
        // document.getElementById("transcript").innerHTML = data.transcript_file || error
        // document.getElementById("diploma").innerHTML = data.diploma_file || error
        // document.getElementById("certificate").innerHTML = data.language_certificate || error
        // document.getElementById("university").innerHTML = data.university_id.toLowerCase() || error
        // document.getElementById("program").innerHTML = data.program_id.toLowerCase() || error
        // document.getElementById("status").innerHTML = data.application_status_slug.toLowerCase() || error
        // document.getElementById("letter").innerHTML = data.acceptance_letter ? `<button class="app_files" onclick="open_link('${data.acceptance_letter}')">View</button>` : error

        
    }
    function open_link(link){
        window.open(link, '_blank')
    }
</script>